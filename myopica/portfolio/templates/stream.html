{% extends "base.html" %}
{% load markup %}
{% block bodyclass %}index{% endblock %}

{% block css %}
<style type="text/css">
.latest {
padding-top: 50px;
}
</style>
{% endblock %}

{% block js %}

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>


{% endblock %}

{% block content %}

{% for image in images %}

<div id="{{image.id}}" class="latest">
<img src="http://reticulum.thraxil.org/image/{{image.ahash}}/960w/{{image.id}}{{image.extension}}" 
alt="{{image.title}}"
/>
</div>

{% endfor %}

<script type="text/javascript">
function lastPostFunc()
{ 
    $.get("/scroll/" + $(".latest:last").attr("id") + "/",   
 
    function(data){
        if (data != "") {
           $(".latest:last").after(data);           
        }
    });
};

$(window).scroll(function(){
        if  ($(window).scrollTop() == $(document).height() - $(window).height()){
           lastPostFunc();
        }
});
</script>

{% endblock %}
